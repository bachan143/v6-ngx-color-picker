{"version":3,"file":"ngx-color-picker.mjs","sources":["../../../projects/lib/src/lib/formats.ts","../../../projects/lib/src/lib/helpers.ts","../../../projects/lib/src/lib/color-picker.service.ts","../../../projects/lib/src/lib/color-picker.component.ts","../../../projects/lib/src/lib/color-picker.component.html","../../../projects/lib/src/lib/color-picker.directive.ts","../../../projects/lib/src/lib/color-picker.module.ts","../../../projects/lib/src/ngx-color-picker.ts"],"sourcesContent":["export class Hsva {\r\n  constructor(public h: number, public s: number, public v: number, public a: number) { }\r\n}\r\n\r\nexport class Hsla {\r\n  constructor(public h: number, public s: number, public l: number, public a: number) { }\r\n}\r\n\r\nexport class Rgba {\r\n  constructor(public r: number, public g: number, public b: number, public a: number) { }\r\n}","import { Directive, Input, Output, EventEmitter, ElementRef } from '@angular/core';\r\n\r\n@Directive({\r\n    selector: '[text]',\r\n    host: {\r\n        '(input)': 'changeInput($event.target.value)'\r\n    }\r\n})\r\nexport class TextDirective {\r\n    @Output('newValue') newValue = new EventEmitter<any>();\r\n    @Input('text') text: any;\r\n    @Input('rg') rg: number;\r\n\r\n    changeInput(value: string) {\r\n        if (this.rg === undefined) {\r\n            this.newValue.emit(value);\r\n        } else {\r\n            let numeric = parseFloat(value)\r\n            if (!isNaN(numeric) && numeric >= 0 && numeric <= this.rg) {\r\n                this.newValue.emit({ v: numeric, rg: this.rg });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@Directive({\r\n    selector: '[slider]',\r\n    host: {\r\n        '(mousedown)': 'start($event)',\r\n        '(touchstart)': 'start($event)'\r\n    }\r\n})\r\nexport class SliderDirective {\r\n    @Output('newValue') newValue = new EventEmitter<any>();\r\n    @Output('dragStart') dragStart = new EventEmitter();\r\n    @Output('dragEnd') dragEnd = new EventEmitter();\r\n    @Input('slider') slider: string;\r\n    @Input('rgX') rgX: number;\r\n    @Input('rgY') rgY: number;\r\n    private listenerMove: any;\r\n    private listenerStop: any;\r\n\r\n    constructor(private el: ElementRef) {\r\n        this.listenerMove = (event: any) => { this.move(event) };\r\n        this.listenerStop = () => { this.stop() };\r\n    }\r\n\r\n    setCursor(event: any) {\r\n        let height = this.el.nativeElement.offsetHeight;\r\n        let width = this.el.nativeElement.offsetWidth;\r\n        let x = Math.max(0, Math.min(this.getX(event), width));\r\n        let y = Math.max(0, Math.min(this.getY(event), height));\r\n\r\n        if (this.rgX !== undefined && this.rgY !== undefined) {\r\n            this.newValue.emit({ s: x / width, v: (1 - y / height), rgX: this.rgX, rgY: this.rgY });\r\n        } else if (this.rgX === undefined && this.rgY !== undefined) {//ready to use vertical sliders\r\n            this.newValue.emit({ v: y / height, rg: this.rgY });\r\n        } else {\r\n            this.newValue.emit({ v: x / width, rg: this.rgX });\r\n        }\r\n    }\r\n\r\n    move(event: any) {\r\n        event.preventDefault();\r\n        this.setCursor(event);\r\n    }\r\n\r\n    start(event: any) {\r\n        this.setCursor(event);\r\n        document.addEventListener('mousemove', this.listenerMove);\r\n        document.addEventListener('touchmove', this.listenerMove);\r\n        document.addEventListener('mouseup', this.listenerStop);\r\n        document.addEventListener('touchend', this.listenerStop);\r\n        this.dragStart.emit();\r\n    }\r\n\r\n    stop() {\r\n        document.removeEventListener('mousemove', this.listenerMove);\r\n        document.removeEventListener('touchmove', this.listenerMove);\r\n        document.removeEventListener('mouseup', this.listenerStop);\r\n        document.removeEventListener('touchend', this.listenerStop);\r\n        this.dragEnd.emit();\r\n    }\r\n\r\n    getX(event: any): number {\r\n        return (event.pageX !== undefined ? event.pageX : event.touches[0].pageX) - this.el.nativeElement.getBoundingClientRect().left - window.pageXOffset;\r\n    }\r\n    getY(event: any): number {\r\n        return (event.pageY !== undefined ? event.pageY : event.touches[0].pageY) - this.el.nativeElement.getBoundingClientRect().top - window.pageYOffset;\r\n    }\r\n}\r\n\r\nexport class SliderPosition {\r\n  constructor(public h: number, public s: number, public v: number, public a: number) { }\r\n}\r\n\r\nexport class SliderDimension {\r\n  constructor(public h: number, public s: number, public v: number, public a: number) { }\r\n}\r\n\r\nexport function detectIE() {\r\n  let ua = '';\r\n\r\n  if (typeof navigator !== \"undefined\") {\r\n    ua = navigator.userAgent.toLowerCase();\r\n  }\r\n\r\n  const msie = ua.indexOf('msie ');\r\n\r\n  if (msie > 0) {\r\n    // IE 10 or older => return version number\r\n    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n  }\r\n\r\n  // other browser\r\n  return false;\r\n}","import { Injectable } from '@angular/core';\r\n\r\nimport { Rgba, Hsla, Hsva } from './formats';\r\n\r\n@Injectable()\r\nexport class ColorPickerService {\r\n    private active = null;\r\n\r\n    constructor() { }\r\n\r\n    setActive(active: any) {\r\n      if (this.active && this.active !== active && this.active.cpDialogDisplay !== 'inline') {\r\n        this.active.closeColorPicker();\r\n      }\r\n      this.active = active;\r\n    }\r\n\r\n    hsla2hsva(hsla: Hsla): Hsva {\r\n        let h = Math.min(hsla.h, 1), s = Math.min(hsla.s, 1), l = Math.min(hsla.l, 1), a = Math.min(hsla.a, 1);\r\n        if (l === 0) {\r\n            return new Hsva(h, 0, 0, a);\r\n        } else {\r\n            let v = l + s * (1 - Math.abs(2 * l - 1)) / 2;\r\n            return new Hsva(h, 2 * (v - l) / v, v, a);\r\n        }\r\n    }\r\n\r\n    hsva2hsla(hsva: Hsva): Hsla {\r\n        let h = hsva.h, s = hsva.s, v = hsva.v, a = hsva.a;\r\n        if (v === 0) {\r\n            return new Hsla(h, 0, 0, a)\r\n        } else if (s === 0 && v === 1) {\r\n            return new Hsla(h, 1, 1, a)\r\n        } else {\r\n            let l = v * (2 - s) / 2;\r\n            return new Hsla(h, v * s / (1 - Math.abs(2 * l - 1)), l, a)\r\n        }\r\n    }\r\n\r\n    rgbaToHsva(rgba: Rgba): Hsva {\r\n        let r = Math.min(rgba.r, 1), g = Math.min(rgba.g, 1), b = Math.min(rgba.b, 1), a = Math.min(rgba.a, 1);\r\n        let max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        let h: number, s: number, v: number = max;\r\n\r\n        let d = max - min;\r\n        s = max === 0 ? 0 : d / max;\r\n\r\n        if (max === min) {\r\n            h = 0;\r\n        } else {\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n\r\n        return new Hsva(h, s, v, a)\r\n    }\r\n\r\n    hsvaToRgba(hsva: Hsva): Rgba {\r\n        let h = hsva.h, s = hsva.s, v = hsva.v, a = hsva.a;\r\n        let r: number, g: number, b: number;\r\n\r\n        let i = Math.floor(h * 6);\r\n        let f = h * 6 - i;\r\n        let p = v * (1 - s);\r\n        let q = v * (1 - f * s);\r\n        let t = v * (1 - (1 - f) * s);\r\n\r\n        switch (i % 6) {\r\n            case 0:\r\n                r = v, g = t, b = p;\r\n                break;\r\n            case 1:\r\n                r = q, g = v, b = p;\r\n                break;\r\n            case 2:\r\n                r = p, g = v, b = t;\r\n                break;\r\n            case 3:\r\n                r = p, g = q, b = v;\r\n                break;\r\n            case 4:\r\n                r = t, g = p, b = v;\r\n                break;\r\n            case 5:\r\n                r = v, g = p, b = q;\r\n                break;\r\n        }\r\n\r\n        return new Rgba(r, g, b, a)\r\n    }\r\n\r\n    stringToHsva(colorString: string = '', allowHex8: boolean = false): Hsva {\r\n        let stringParsers = [\r\n            {\r\n                re: /(rgb)a?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*%?,\\s*(\\d{1,3})\\s*%?(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n                parse: function(execResult: any) {\r\n                    return new Rgba(parseInt(execResult[2]) / 255,\r\n                        parseInt(execResult[3]) / 255,\r\n                        parseInt(execResult[4]) / 255,\r\n                        isNaN(parseFloat(execResult[5])) ? 1 : parseFloat(execResult[5]));\r\n                }\r\n            },\r\n            {\r\n                re: /(hsl)a?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})%\\s*,\\s*(\\d{1,3})%\\s*(?:,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)/,\r\n                parse: function(execResult: any) {\r\n                    return new Hsla(parseInt(execResult[2]) / 360,\r\n                        parseInt(execResult[3]) / 100,\r\n                        parseInt(execResult[4]) / 100,\r\n                        isNaN(parseFloat(execResult[5])) ? 1 : parseFloat(execResult[5]));\r\n                }\r\n            }\r\n        ];\r\n        if (allowHex8) {\r\n            stringParsers.push({\r\n                re: /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,\r\n                parse: function(execResult: any) {\r\n                    return new Rgba(parseInt(execResult[1], 16) / 255,\r\n                        parseInt(execResult[2], 16) / 255,\r\n                        parseInt(execResult[3], 16) / 255,\r\n                        parseInt(execResult[4] || 'FF', 16) / 255);\r\n                }\r\n            });\r\n        } else {\r\n            stringParsers.push({\r\n                re: /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,\r\n                parse: function(execResult: any) {\r\n                    return new Rgba(parseInt(execResult[1], 16) / 255,\r\n                        parseInt(execResult[2], 16) / 255,\r\n                        parseInt(execResult[3], 16) / 255,\r\n                        1);\r\n                }\r\n            },\r\n                {\r\n                    re: /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,\r\n                    parse: function(execResult: any) {\r\n                        return new Rgba(parseInt(execResult[1] + execResult[1], 16) / 255,\r\n                            parseInt(execResult[2] + execResult[2], 16) / 255,\r\n                            parseInt(execResult[3] + execResult[3], 16) / 255,\r\n                            1);\r\n                    }\r\n                });\r\n        }\r\n\r\n\r\n        colorString = (colorString || '').toLowerCase();\r\n        let hsva: Hsva = null;\r\n        for (let key in stringParsers) {\r\n            if (stringParsers.hasOwnProperty(key)) {\r\n                let parser = stringParsers[key];\r\n                let match = parser.re.exec(colorString), color: any = match && parser.parse(match);\r\n                if (color) {\r\n                    if (color instanceof Rgba) {\r\n                        hsva = this.rgbaToHsva(color);\r\n                    } else if (color instanceof Hsla) {\r\n                        hsva = this.hsla2hsva(color);\r\n                    }\r\n                    return hsva;\r\n                }\r\n            }\r\n        }\r\n        return hsva;\r\n    }\r\n\r\n    outputFormat(hsva: Hsva, outputFormat: string, alphaChannel: string): string {\r\n        switch (outputFormat) {\r\n            case 'hsla':\r\n                let hsla = this.hsva2hsla(hsva);\r\n                let hslaText = new Hsla(Math.round((hsla.h) * 360), Math.round(hsla.s * 100), Math.round(hsla.l * 100), Math.round(hsla.a * 100) / 100);\r\n                if (hsva.a < 1 || alphaChannel === 'always') {\r\n                    return 'hsla(' + hslaText.h + ',' + hslaText.s + '%,' + hslaText.l + '%,' + hslaText.a + ')';\r\n                } else {\r\n                    return 'hsl(' + hslaText.h + ',' + hslaText.s + '%,' + hslaText.l + '%)';\r\n                }\r\n            case 'rgba':\r\n                let rgba = this.denormalizeRGBA(this.hsvaToRgba(hsva));\r\n                if (hsva.a < 1 || alphaChannel === 'always') {\r\n                    return 'rgba(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ',' + Math.round(rgba.a * 100) / 100 + ')';\r\n                } else {\r\n                    return 'rgb(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ')';\r\n                }\r\n            default:\r\n                return this.hexText(this.denormalizeRGBA(this.hsvaToRgba(hsva)), alphaChannel === 'always' || alphaChannel === 'hex8');\r\n\r\n        }\r\n    }\r\n\r\n    hexText(rgba: Rgba, allowHex8: boolean): string {\r\n        let hexText = '#' + ((1 << 24) | (rgba.r << 16) | (rgba.g << 8) | rgba.b).toString(16).substr(1);\r\n        /*if (hexText[1] === hexText[2] && hexText[3] === hexText[4] && hexText[5] === hexText[6] && !allowHex8) {\r\n            hexText = '#' + hexText[1] + hexText[3] + hexText[5];\r\n        }*/\r\n        if (allowHex8) {\r\n            hexText += ((1 << 8) | Math.round(rgba.a * 255)).toString(16).substr(1);\r\n        }\r\n        return hexText;\r\n    }\r\n\r\n    denormalizeRGBA(rgba: Rgba): Rgba {\r\n        return new Rgba(Math.round(rgba.r * 255), Math.round(rgba.g * 255), Math.round(rgba.b * 255), rgba.a);\r\n    }\r\n\r\n}","import {Component, ElementRef, OnInit, AfterViewInit, ViewChild, ChangeDetectorRef} from '@angular/core';\r\n\r\nimport { ColorPickerService } from './color-picker.service';\r\n\r\nimport { Rgba, Hsla, Hsva } from './formats';\r\nimport { SliderPosition, SliderDimension, detectIE } from './helpers';\r\n\r\n@Component({\r\n    selector: 'color-picker',\r\n    templateUrl: './color-picker.component.html',\r\n    styleUrls: ['./color-picker.component.css']\r\n})\r\n\r\nexport class ColorPickerComponent implements OnInit, AfterViewInit {\r\n    public cpPosition: string;\r\n    public cpPositionOffset: number;\r\n    public cpOutputFormat: string;\r\n    public cpPresetLabel: string;\r\n    public cpPresetEmptyMessage: string;\r\n    public cpPresetEmptyMessageClass: string;\r\n    public cpPresetColors: Array<string>;\r\n    public cpMaxPresetColorsLength: number;\r\n    public cpCancelButton: boolean;\r\n    public cpCancelButtonClass: string;\r\n    public cpCancelButtonText: string;\r\n    public cpOKButton: boolean;\r\n    public cpOKButtonClass: string;\r\n    public cpOKButtonText: string;\r\n    public cpHeight: number;\r\n    public cpWidth: number;\r\n    public cpIgnoredElements: any;\r\n    public cpDialogDisplay: string;\r\n    public cpSaveClickOutside: boolean;\r\n    public cpAlphaChannel: string;\r\n    public cpAddColorButton: boolean;\r\n    public cpAddColorButtonClass: string;\r\n    public cpAddColorButtonText: string;\r\n    public cpRemoveColorButtonClass: string;\r\n\r\n    public rgbaText: Rgba;\r\n    public hslaText: Hsla;\r\n    public selectedColor: string;\r\n    public alphaSliderColor: string;\r\n    public hueSliderColor: string;\r\n    public slider: SliderPosition;\r\n    public show: boolean;\r\n    public hidden: boolean;\r\n    public top: number;\r\n    public left: number;\r\n    public position: string;\r\n    public format: number;\r\n    public hexText: string;\r\n    public arrowTop: number;\r\n\r\n    private hsva: Hsva;\r\n    private width: number;\r\n    private height: number;\r\n    private outputColor: string;\r\n    private sliderDimMax: SliderDimension;\r\n    private directiveInstance: any;\r\n    private initialColor: string;\r\n    private directiveElementRef: ElementRef;\r\n\r\n    private listenerMouseDown: any;\r\n    private listenerResize: any;\r\n\r\n    private dialogArrowSize: number = 10;\r\n    private dialogArrowOffset: number = 15;\r\n\r\n    private useRootViewContainer: boolean = false;\r\n\r\n    private isIE10: boolean = false;\r\n    public headerName: string = \"Edit Color\";\r\n    public saveBtnTxt: string = \"Save\";\r\n    public cancelBtnTxt: string = \"Cancel\"\r\n\r\n    @ViewChild('hueSlider') hueSlider: any;\r\n    @ViewChild('alphaSlider') alphaSlider: any;\r\n    @ViewChild('dialogPopup') dialogElement: any;\r\n\r\n    constructor(private el: ElementRef, private cdr: ChangeDetectorRef, private service: ColorPickerService) { }\r\n\r\n    setDialog(instance: any, elementRef: ElementRef, color: any, cpPosition: string, cpPositionOffset: string,\r\n        cpPositionRelativeToArrow: boolean, cpOutputFormat: string, cpPresetLabel: string,\r\n        cpPresetEmptyMessage: string, cpPresetEmptyMessageClass: string, cpPresetColors: Array<string>, cpMaxPresetColorsLength: number,\r\n        cpCancelButton: boolean, cpCancelButtonClass: string, cpCancelButtonText: string,\r\n        cpOKButton: boolean, cpOKButtonClass: string, cpOKButtonText: string,\r\n        cpAddColorButton: boolean, cpAddColorButtonClass: string, cpAddColorButtonText: string,\r\n        cpRemoveColorButtonClass: string, cpHeight: string, cpWidth: string,\r\n        cpIgnoredElements: any, cpDialogDisplay: string, cpSaveClickOutside: boolean, cpAlphaChannel: string, cpUseRootViewContainer: boolean,headerName: string, saveBtnTxt: string,\r\n        cancelBtnTxt: string ) {\r\n        this.directiveInstance = instance;\r\n        this.initialColor = color;\r\n        this.directiveElementRef = elementRef;\r\n        this.cpPosition = cpPosition;\r\n        this.cpPositionOffset = parseInt(cpPositionOffset);\r\n        if (!cpPositionRelativeToArrow) {\r\n            this.dialogArrowOffset = 0;\r\n        }\r\n        this.cpOutputFormat = cpOutputFormat;\r\n        this.cpPresetLabel = cpPresetLabel;\r\n        this.cpPresetEmptyMessage = cpPresetEmptyMessage;\r\n        this.cpPresetEmptyMessageClass = cpPresetEmptyMessageClass;\r\n        this.cpPresetColors = cpPresetColors;\r\n        this.cpMaxPresetColorsLength = cpMaxPresetColorsLength;\r\n        this.cpCancelButton = cpCancelButton;\r\n        this.cpCancelButtonClass = cpCancelButtonClass;\r\n        this.cpCancelButtonText = cpCancelButtonText;\r\n        this.cpOKButton = cpOKButton;\r\n        this.cpOKButtonClass = cpOKButtonClass;\r\n        this.cpOKButtonText = cpOKButtonText;\r\n        this.cpAddColorButton = cpAddColorButton;\r\n        this.cpAddColorButtonClass = cpAddColorButtonClass;\r\n        this.cpAddColorButtonText = cpAddColorButtonText;\r\n        this.cpRemoveColorButtonClass = cpRemoveColorButtonClass;\r\n        this.width = this.cpWidth = parseInt(cpWidth);\r\n        this.height = this.cpHeight = parseInt(cpHeight);\r\n        this.cpIgnoredElements = cpIgnoredElements;\r\n        this.cpDialogDisplay = cpDialogDisplay;\r\n        if (this.cpDialogDisplay === 'inline') {\r\n            this.dialogArrowOffset = 0;\r\n            this.dialogArrowSize = 0;\r\n        }\r\n        this.cpSaveClickOutside = cpSaveClickOutside;\r\n        this.cpAlphaChannel = cpAlphaChannel;\r\n        this.useRootViewContainer = cpUseRootViewContainer;\r\n        if (cpOutputFormat === 'hex' && cpAlphaChannel !== 'always' && cpAlphaChannel !== 'hex8') {\r\n          this.cpAlphaChannel = 'disabled';\r\n        }\r\n\r\n        this.isIE10 = detectIE() === 10;\r\n        this.headerName = headerName;\r\n        this.saveBtnTxt = saveBtnTxt;\r\n        this.cancelBtnTxt = cancelBtnTxt;\r\n    }\r\n\r\n    ngOnInit() {\r\n        let alphaWidth = this.alphaSlider.nativeElement.offsetWidth;\r\n        let hueWidth = this.hueSlider.nativeElement.offsetWidth;\r\n        this.sliderDimMax = new SliderDimension(hueWidth + 42, this.cpWidth - 32, 130, alphaWidth);\r\n        this.slider = new SliderPosition(0, 0, 0, 0);\r\n        if (this.cpOutputFormat === 'rgba') {\r\n            this.format = 1;\r\n        } else if (this.cpOutputFormat === 'hsla') {\r\n            this.format = 2;\r\n        } else {\r\n            this.format = 0;\r\n        }\r\n        this.listenerMouseDown = (event: any) => { this.onMouseDown(event); };\r\n        this.listenerResize = () => { this.onResize(); };\r\n        this.openDialog(this.initialColor, false);\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.cpWidth != 272) {\r\n            let alphaWidth = this.alphaSlider.nativeElement.offsetWidth;\r\n            let hueWidth = this.hueSlider.nativeElement.offsetWidth;\r\n            this.sliderDimMax = new SliderDimension(hueWidth, this.cpWidth, 130, alphaWidth);\r\n\r\n            this.update(false);\r\n\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n\r\n    setInitialColor(color: any) {\r\n        this.initialColor = color;\r\n    }\r\n\r\n    setPresetConfig(cpPresetLabel: string, cpPresetColors: Array<string>) {\r\n        this.cpPresetLabel = cpPresetLabel;\r\n        this.cpPresetColors = cpPresetColors;\r\n    }\r\n\r\n    openDialog(color: any, emit: boolean = true) {\r\n        this.service.setActive(this);\r\n        if (!this.width) {\r\n            this.cpWidth = this.directiveElementRef.nativeElement.offsetWidth;\r\n        }\r\n        this.setInitialColor(color);\r\n        this.setColorFromString(color, emit);\r\n        this.openColorPicker();\r\n    }\r\n\r\n    cancelColor(event: Event) {\r\n          if (event && event.stopPropagation) {\r\n            event.stopPropagation();\r\n          }\r\n        this.setColorFromString(this.initialColor, true);\r\n        if (this.cpDialogDisplay === 'popup') {\r\n            this.directiveInstance.colorChanged(this.initialColor, true);\r\n            this.closeColorPicker();\r\n        }\r\n\r\n        this.directiveInstance.colorCanceled();\r\n    }\r\n\r\n    oKColor(event: Event) {\r\n          if (event && event.stopPropagation) {\r\n            event.stopPropagation();\r\n          }\r\n        if (this.cpDialogDisplay === 'popup') {\r\n            this.closeColorPicker();\r\n        }\r\n\r\n        if (this.outputColor) {\r\n            this.directiveInstance.colorSelected(this.outputColor);\r\n        }\r\n    }\r\n\r\n    setColorFromString(value: string, emit: boolean = true, update: boolean = true) {\r\n        let hsva: Hsva;\r\n        if (this.cpAlphaChannel === 'always' || this.cpAlphaChannel === 'hex8') {\r\n            hsva = this.service.stringToHsva(value, true);\r\n            if (!hsva && !this.hsva) {\r\n                hsva = this.service.stringToHsva(value, false);\r\n            }\r\n        } else {\r\n            hsva = this.service.stringToHsva(value, false);\r\n        }\r\n        if (hsva) {\r\n            this.hsva = hsva;\r\n            this.update(emit, update);\r\n        }\r\n    }\r\n\r\n    addPresetColor(event: any, value: string) {\r\n        if (event && event.stopPropagation) {\r\n            event.stopPropagation();\r\n        }\r\n\r\n        if (!this.cpPresetColors.filter((color) => color === value).length) {\r\n            this.cpPresetColors = this.cpPresetColors.concat(value);\r\n            this.directiveInstance.presetColorsChanged(this.cpPresetColors);\r\n        }\r\n    }\r\n\r\n    removePresetColor(event: any, value: string) {\r\n        if (event && event.stopPropagation) {\r\n            event.stopPropagation();\r\n        }\r\n\r\n        this.cpPresetColors = this.cpPresetColors.filter((color) => color !== value);\r\n        this.directiveInstance.presetColorsChanged(this.cpPresetColors);\r\n    }\r\n\r\n    onDragEnd(slider: string) {\r\n      this.directiveInstance.sliderDragEnd({slider: slider, color: this.outputColor});\r\n    }\r\n\r\n    onDragStart(slider: string) {\r\n      this.directiveInstance.sliderDragStart({slider: slider, color: this.outputColor});\r\n    }\r\n\r\n    onMouseDown(event: any) {\r\n        // Workaround for IE10: We need to manually click on OK/Cancel button to close the color-picker [detectIE() !== 10]\r\n        if ((!this.isDescendant(this.el.nativeElement, event.target)\r\n            && event.target != this.directiveElementRef.nativeElement &&\r\n            this.cpIgnoredElements.filter((item: any) => item === event.target).length === 0) &&\r\n            this.cpDialogDisplay === 'popup' && !this.isIE10) {\r\n            if (!this.cpSaveClickOutside) {\r\n                this.setColorFromString(this.initialColor, false);\r\n                this.directiveInstance.colorChanged(this.initialColor);\r\n            }\r\n            this.closeColorPicker();\r\n        }\r\n    }\r\n\r\n    openColorPicker() {\r\n        if (!this.show) {\r\n            this.show = true;\r\n            this.hidden = true;\r\n            setTimeout(() => {\r\n              this.setDialogPosition();\r\n              this.hidden = false;\r\n              this.cdr.detectChanges();\r\n            }, 0);\r\n            this.directiveInstance.toggle(true);\r\n            /**\r\n             * Required for IE10\r\n             * This event listener is conditional to avoid memory leaks\r\n             * If the directive was applied at the root level then this won't affect anything\r\n             * but if we implement this color picker in child components then it closes on clicking anywhere (including this component)\r\n             * and stopPropagation() does not work\r\n             */\r\n            if (!this.isIE10) {\r\n              document.addEventListener('mousedown', this.listenerMouseDown);\r\n            }\r\n            window.addEventListener('resize', this.listenerResize);\r\n        }\r\n    }\r\n\r\n    closeColorPicker() {\r\n        if (this.show) {\r\n            this.show = false;\r\n            this.directiveInstance.toggle(false);\r\n            /**\r\n             * Required for IE10\r\n             * If this is not attached then no need to remove the listener\r\n             */\r\n            if (!this.isIE10) {\r\n              document.removeEventListener('mousedown', this.listenerMouseDown);\r\n            }\r\n            window.removeEventListener('resize', this.listenerResize);\r\n\r\n            if (!this.cdr['destroyed']) {\r\n              this.cdr.detectChanges();\r\n            }\r\n        }\r\n    }\r\n\r\n    onResize() {\r\n        if (this.position === 'fixed') {\r\n            this.setDialogPosition();\r\n        } else if (this.cpDialogDisplay !== 'inline') {\r\n            this.closeColorPicker();\r\n        }\r\n    }\r\n\r\n    setDialogPosition() {\r\n        if (this.cpDialogDisplay === 'inline') {\r\n          this.position = 'relative';\r\n          return;\r\n        }\r\n        let dialogHeight = this.dialogElement.nativeElement.offsetHeight;\r\n        let node = this.directiveElementRef.nativeElement.parentNode, position = 'static', transform = '';\r\n        let parentNode: any = null, transformNode: any = null, style: any = null;\r\n        while (node !== null && node.tagName !== 'HTML') {\r\n            style = window.getComputedStyle(node);\r\n            position = style.getPropertyValue(\"position\");\r\n            transform = style.getPropertyValue(\"transform\");\r\n            if (position !== 'static' && parentNode === null) {\r\n                parentNode = node;\r\n            }\r\n            if (transform && transform !== 'none' && transformNode === null) {\r\n              transformNode = node;\r\n            }\r\n            if (position === 'fixed') {\r\n              parentNode = transformNode;\r\n                break;\r\n            }\r\n            node = node.parentNode;\r\n        }\r\n        let boxDirective = this.createBox(this.directiveElementRef.nativeElement, (position !== 'fixed'));\r\n        if ((position !== 'fixed' || parentNode) && !this.useRootViewContainer) {\r\n            if (parentNode === null) { parentNode = node }\r\n            let boxParent = this.createBox(parentNode, (position !== 'fixed'));\r\n            this.top = boxDirective.top - boxParent.top;\r\n            this.left = boxDirective.left - boxParent.left;\r\n        } else {\r\n            this.top = boxDirective.top;\r\n            this.left = boxDirective.left;\r\n        }\r\n\r\n        if (position === 'fixed') { this.position = 'fixed'; }\r\n        if (this.cpPosition === 'left') {\r\n            this.top += boxDirective.height * this.cpPositionOffset / 100 - this.dialogArrowOffset;\r\n            this.left -= this.cpWidth + this.dialogArrowSize - 2;\r\n        } else if (this.cpPosition === 'top') {\r\n            this.top -= dialogHeight + this.dialogArrowSize;\r\n            this.left += this.cpPositionOffset / 100 * boxDirective.width - this.dialogArrowOffset;\r\n            this.arrowTop = dialogHeight - 1;\r\n        } else if (this.cpPosition === 'bottom') {\r\n            this.top += boxDirective.height + this.dialogArrowSize;\r\n            this.left += this.cpPositionOffset / 100 * boxDirective.width - this.dialogArrowOffset;\r\n        } else {\r\n            this.top += boxDirective.height * this.cpPositionOffset / 100 - this.dialogArrowOffset;\r\n            this.left += boxDirective.width + this.dialogArrowSize - 2;\r\n        }\r\n    }\r\n\r\n    setSaturation(val: { v: number, rg: number }) {\r\n        let hsla = this.service.hsva2hsla(this.hsva);\r\n        hsla.s = val.v / val.rg;\r\n        this.hsva = this.service.hsla2hsva(hsla);\r\n        this.update();\r\n\r\n        this.directiveInstance.inputChanged({input: 'saturation', value: hsla.s, color: this.outputColor});\r\n    }\r\n\r\n    setLightness(val: { v: number, rg: number }) {\r\n        let hsla = this.service.hsva2hsla(this.hsva);\r\n        hsla.l = val.v / val.rg;\r\n        this.hsva = this.service.hsla2hsva(hsla);\r\n        this.update();\r\n\r\n        this.directiveInstance.inputChanged({input: 'lightness', value: hsla.l, color: this.outputColor});\r\n    }\r\n\r\n    setHue(val: { v: number, rg: number }) {\r\n        this.hsva.h = val.v / val.rg;\r\n        this.update();\r\n\r\n        this.directiveInstance.sliderChanged({slider: 'hue', value: this.hsva.h, color: this.outputColor});\r\n    }\r\n\r\n    setAlpha(val: { v: number, rg: number }) {\r\n        this.hsva.a = val.v / val.rg;\r\n        this.update();\r\n\r\n        this.directiveInstance.sliderChanged({slider: 'alpha', value: this.hsva.a, color: this.outputColor});\r\n    }\r\n\r\n    setR(val: { v: number, rg: number }) {\r\n        let rgba = this.service.hsvaToRgba(this.hsva);\r\n        rgba.r = val.v / val.rg;\r\n        this.hsva = this.service.rgbaToHsva(rgba);\r\n        this.update();\r\n\r\n        this.directiveInstance.inputChanged({input: 'red', value: rgba.r, color: this.outputColor});\r\n    }\r\n    setG(val: { v: number, rg: number }) {\r\n        let rgba = this.service.hsvaToRgba(this.hsva);\r\n        rgba.g = val.v / val.rg;\r\n        this.hsva = this.service.rgbaToHsva(rgba);\r\n        this.update();\r\n\r\n        this.directiveInstance.inputChanged({input: 'green', value: rgba.g, color: this.outputColor});\r\n    }\r\n    setB(val: { v: number, rg: number }) {\r\n        let rgba = this.service.hsvaToRgba(this.hsva);\r\n        rgba.b = val.v / val.rg;\r\n        this.hsva = this.service.rgbaToHsva(rgba);\r\n        this.update();\r\n\r\n        this.directiveInstance.inputChanged({input: 'blue', value: rgba.b, color: this.outputColor});\r\n    }\r\n    setA(val: { v: number, rg: number }) {\r\n        this.hsva.a = val.v / val.rg;\r\n        this.update();\r\n\r\n        this.directiveInstance.inputChanged({input: 'alpha', value: this.hsva.a, color: this.outputColor});\r\n    }\r\n\r\n    setHex(val: string) {\r\n      if (val === null) {\r\n        this.update();\r\n      } else {\r\n        this.setColorFromString(val, true, false);\r\n\r\n        this.directiveInstance.inputChanged({input: 'hex', value: val, color: this.outputColor});\r\n      }\r\n    }\r\n\r\n    setSaturationAndBrightness(val: { s: number, v: number, rgX: number, rgY: number }) {\r\n        this.hsva.s = val.s / val.rgX ;\r\n        this.hsva.v = val.v / val.rgY;\r\n        this.update();\r\n        this.directiveInstance.sliderChanged({slider: 'lightness', value: this.hsva.v, color: this.outputColor});\r\n        this.directiveInstance.sliderChanged({slider: 'saturation', value: this.hsva.s, color: this.outputColor});\r\n    }\r\n\r\n    formatPolicy(): number {\r\n        this.format = (this.format + 1) % 3;\r\n        return this.format;\r\n    }\r\n\r\n    update(emit: boolean = true, update: boolean = true) {\r\n        if (this.sliderDimMax) {\r\n            let hsla = this.service.hsva2hsla(this.hsva);\r\n            let rgba = this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva));\r\n            let hueRgba = this.service.denormalizeRGBA(this.service.hsvaToRgba(new Hsva(this.hsva.h, 1, 1, 1)));\r\n\r\n            if (update) {\r\n              this.hslaText = new Hsla(Math.round((hsla.h) * 360), Math.round(hsla.s * 100), Math.round(hsla.l * 100), Math.round(hsla.a * 100) / 100);\r\n              this.rgbaText = new Rgba(rgba.r, rgba.g, rgba.b, Math.round(rgba.a * 100) / 100);\r\n              this.hexText = this.service.hexText(rgba, this.cpAlphaChannel === 'always' || this.cpAlphaChannel === 'hex8');\r\n            }\r\n\r\n            this.alphaSliderColor = 'rgb(' + rgba.r + ',' + rgba.g + ',' + rgba.b + ')';\r\n            this.hueSliderColor = 'rgb(' + hueRgba.r + ',' + hueRgba.g + ',' + hueRgba.b + ')';\r\n\r\n            let lastOutput = this.outputColor;\r\n            this.outputColor = this.service.outputFormat(this.hsva, this.cpOutputFormat, this.cpAlphaChannel);\r\n            this.selectedColor = this.service.outputFormat(this.hsva, 'rgba', null);\r\n\r\n            this.slider = new SliderPosition((this.hsva.h) * this.sliderDimMax.h - 8, this.hsva.s * this.sliderDimMax.s - 8,\r\n                (1 - this.hsva.v) * this.sliderDimMax.v - 8, this.hsva.a * this.sliderDimMax.a - 8)\r\n\r\n            if (emit && lastOutput !== this.outputColor) {\r\n                this.directiveInstance.colorChanged(this.outputColor);\r\n            }\r\n        }\r\n    }\r\n\r\n    isDescendant(parent: any, child: any): boolean {\r\n        let node: any = child.parentNode;\r\n        while (node !== null) {\r\n            if (node === parent) {\r\n                return true;\r\n            }\r\n            node = node.parentNode;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    createBox(element: any, offset: boolean): any {\r\n        return {\r\n            top: element.getBoundingClientRect().top + (offset ? window.pageYOffset : 0),\r\n            left: element.getBoundingClientRect().left + (offset ? window.pageXOffset : 0),\r\n            width: element.offsetWidth,\r\n            height: element.offsetHeight\r\n        };\r\n    }\r\n}","<div class=\"color-picker color-picker-position\" [style.visibility]=\"hidden || !show ? 'hidden' : 'visible'\" [style.height.px]=\"cpHeight\" [style.width.px]=\"cpWidth\"\r\n     #dialogPopup>\r\n    <header class=\"header-conatiner lgrey-back\" style=\"height: 50px;\">\r\n        <span class=\"text-uppercase head-content\"> {{headerName}} </span>\r\n        <button class=\"closeBtn mdgrey-back\" type=\"button\" data-testid=\"color-picker-close\"\r\n            (click)=\"cancelColor($event)\">\r\n            <i aria-hidden=\"true\" class=\"fas fa-times white-font\"></i>\r\n        </button>\r\n    </header>\r\n    <div class=\"color-picker-body\">\r\n\r\n        <div [slider] [style.background-color]=\"hueSliderColor\" [rgX]=\"1\" [rgY]=\"1\" (newValue)=\"setSaturationAndBrightness($event)\"\r\n            (dragStart)=\"onDragStart('saturation-lightness')\" (dragEnd)=\"onDragEnd('saturation-lightness')\" class=\"saturation-lightness\">\r\n            <div [style.left.px]=\"slider.s\" [style.top.px]=\"slider.v\" class=\"cursor\"></div>\r\n        </div>\r\n        <div class=\"box\">\r\n            <div class=\"left\">\r\n                <div class=\"selected-color-background\"></div>\r\n                <div [style.background-color]=\"selectedColor\" class=\"selected-color\"></div>\r\n                <button *ngIf=\"cpAddColorButton\" class=\"{{cpAddColorButtonClass}}\" (click)=\"addPresetColor($event, selectedColor)\" [disabled]=\"cpPresetColors && cpPresetColors.length >= cpMaxPresetColorsLength\">\r\n                    {{cpAddColorButtonText}}\r\n                </button>\r\n            </div>\r\n            <div class=\"right\">\r\n                <div *ngIf=\"cpAlphaChannel==='disabled'\" style=\"height: 5.5px;\"></div>\r\n\r\n                <div [slider] [rgX]=\"1\" (newValue)=\"setHue($event)\" (dragStart)=\"onDragStart('hue')\" (dragEnd)=\"onDragEnd('hue')\" class=\"hue\"\r\n                    #hueSlider>\r\n                    <div [style.left.px]=\"slider.h\" class=\"cursor\"></div>\r\n                </div>\r\n\r\n                <div [style.display]=\"cpAlphaChannel === 'disabled' ? 'none' : 'block'\" [slider] [style.background-color]=\"alphaSliderColor\"\r\n                    [rgX]=\"1\" (newValue)=\"setAlpha($event)\" (dragStart)=\"onDragStart('alpha')\" (dragEnd)=\"onDragEnd('alpha')\"\r\n                    class=\"alpha\" #alphaSlider>\r\n                    <div [style.left.px]=\"slider.a\" class=\"cursor\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"hsla-text\">\r\n            <div class=\"box\">\r\n                <div>H</div>\r\n                <input [text] type=\"number\" pattern=\"[0-9]*\" min=\"0\" max=\"360\" [rg]=\"360\" (newValue)=\"setHue($event)\" [value]=\"hslaText.h\"\r\n                />\r\n                <div>S</div>\r\n                <input [text] type=\"number\" pattern=\"[0-9]*\" min=\"0\" max=\"100\" [rg]=\"100\" (newValue)=\"setSaturation($event)\" [value]=\"hslaText.s\"\r\n                />\r\n                <div>L</div>\r\n                <input [text] type=\"number\" pattern=\"[0-9]*\" min=\"0\" max=\"100\" [rg]=\"100\" (newValue)=\"setLightness($event)\" [value]=\"hslaText.l\"\r\n                />\r\n                <div *ngIf=\"cpAlphaChannel!=='disabled'\">A</div>\r\n                <input *ngIf=\"cpAlphaChannel!=='disabled'\" [text] type=\"number\" pattern=\"[0-9]+([\\.,][0-9]{1,2})?\" min=\"0\" max=\"1\" step=\"0.1\"\r\n                    [rg]=\"1\" (newValue)=\"setA($event)\" [value]=\"hslaText.a\" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"rgba-text\">\r\n            <div class=\"box\">\r\n                <div>R</div>\r\n                <input [text] type=\"number\" pattern=\"[0-9]*\" min=\"0\" max=\"255\" [rg]=\"255\" (newValue)=\"setR($event)\" [value]=\"rgbaText.r\"\r\n                />\r\n                <div>G</div>\r\n                <input [text] type=\"number\" pattern=\"[0-9]*\" min=\"0\" max=\"255\" [rg]=\"255\" (newValue)=\"setG($event)\" [value]=\"rgbaText.g\"\r\n                />\r\n                <div>B</div>\r\n                <input [text] type=\"number\" pattern=\"[0-9]*\" min=\"0\" max=\"255\" [rg]=\"255\" (newValue)=\"setB($event)\" [value]=\"rgbaText.b\"\r\n                />\r\n                <div *ngIf=\"cpAlphaChannel!=='disabled'\">A</div>\r\n                <input *ngIf=\"cpAlphaChannel!=='disabled'\" [text] type=\"number\" pattern=\"[0-9]+([\\.,][0-9]{1,2})?\" min=\"0\" max=\"1\" step=\"0.1\"\r\n                    [rg]=\"1\" (newValue)=\"setA($event)\" [value]=\"rgbaText.a\" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"hex-text\">\r\n            <div class=\"box\">\r\n                <div>Hex</div>\r\n                <input [text] (blur)=\"setHex(null)\" (newValue)=\"setHex($event)\" [value]=\"hexText\" />\r\n            </div>\r\n        </div>\r\n\r\n        <!-- <div (click)=\"formatPolicy()\" class=\"type-policy\"></div> -->\r\n\r\n        <div *ngIf=\"cpPresetColors\" class=\"preset-area\">\r\n            <hr>\r\n\r\n            <div class=\"preset-label\">{{cpPresetLabel}}</div>\r\n            <div *ngIf=\"cpPresetColors.length\">\r\n                <div *ngFor=\"let color of cpPresetColors\" class=\"preset-color\" [style.backgroundColor]=\"color\" (click)=\"setColorFromString(color)\">\r\n                    <span *ngIf=\"cpAddColorButton\" class=\"{{cpRemoveColorButtonClass}}\" (click)=\"removePresetColor($event, color)\"></span>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!cpPresetColors.length && cpAddColorButton\" class=\"{{cpPresetEmptyMessageClass}}\">{{cpPresetEmptyMessage}}</div>\r\n        </div>\r\n\r\n        <!-- <div *ngIf=\"cpOKButton || cpCancelButton\" class=\"button-area\">\r\n        <button *ngIf=\"cpOKButton\" type=\"button\" class=\"{{cpOKButtonClass}}\" (click)=\"oKColor($event)\">{{cpOKButtonText}}</button>\r\n        <button *ngIf=\"cpCancelButton\" type=\"button\" class=\"{{cpCancelButtonClass}}\" (click)=\"cancelColor($event)\">{{cpCancelButtonText}}</button>\r\n    </div> -->\r\n    </div>\r\n    <footer class=\"box-footer lgrey-back\">\r\n        <div class=\"ng-star-inserted\" style=\"width: 110px;\">\r\n            <button class=\"btn wide-btn text-uppercase black-back white-font\" type=\"button\" data-testid=\"color-picker-save\" (click)=\"oKColor($event)\">\r\n            {{saveBtnTxt}} </button>\r\n        </div>\r\n        <div class=\"ng-star-inserted \" style=\"width: 110px; margin-left: 20px;\">\r\n            <button class=\"btn wide-btn grey-back text-uppercase mdgrey-back white-font\" type=\"button\" data-testid=\"color-picker-cancel\" (click)=\"cancelColor($event)\">\r\n            {{cancelBtnTxt}}</button>\r\n        </div>\r\n    </footer>\r\n</div>","import { OnInit, OnChanges, Directive, Input, Output, EventEmitter, Injector, ApplicationRef, ElementRef, ViewContainerRef, ReflectiveInjector, ComponentFactoryResolver, ComponentRef, OnDestroy } from '@angular/core';\r\n\r\nimport { ColorPickerService } from './color-picker.service';\r\nimport { ColorPickerComponent } from './color-picker.component';\r\n\r\nimport { SliderPosition, SliderDimension} from './helpers';\r\n\r\n@Directive({\r\n    selector: '[colorPicker]',\r\n    host: {\r\n      '(click)': 'inputFocus()',\r\n      '(focus)': 'inputFocus()',\r\n      '(input)': 'inputChange($event.target.value)'\r\n    }\r\n})\r\nexport class ColorPickerDirective implements OnInit, OnChanges, OnDestroy {\r\n    @Input('colorPicker') colorPicker: string;\r\n    @Input('cpToggle') cpToggle: boolean;\r\n    @Input('cpPosition') cpPosition: string = 'right';\r\n    @Input('cpPositionOffset') cpPositionOffset: string = '0%';\r\n    @Input('cpPositionRelativeToArrow') cpPositionRelativeToArrow: boolean = false;\r\n    @Input('cpOutputFormat') cpOutputFormat: string = 'hex';\r\n    @Input('cpPresetLabel') cpPresetLabel: string = 'Preset colors';\r\n    @Input('cpPresetEmptyMessage') cpPresetEmptyMessage: string = 'No colors added';\r\n    @Input('cpPresetEmptyMessageClass') cpPresetEmptyMessageClass: string = 'preset-empty-message';\r\n    @Input('cpPresetColors') cpPresetColors: Array<string>;\r\n    @Input('cpMaxPresetColorsLength') cpMaxPresetColorsLength: number = 6;\r\n    @Input('cpCancelButton') cpCancelButton: boolean = false;\r\n    @Input('cpCancelButtonClass') cpCancelButtonClass: string = 'cp-cancel-button-class';\r\n    @Input('cpCancelButtonText') cpCancelButtonText: string = 'Cancel';\r\n    @Input('cpOKButton') cpOKButton: boolean = false;\r\n    @Input('cpOKButtonClass') cpOKButtonClass: string = 'cp-ok-button-class';\r\n    @Input('cpOKButtonText') cpOKButtonText: string = 'OK';\r\n    @Input('cpAddColorButton') cpAddColorButton: boolean = false;\r\n    @Input('cpAddColorButtonClass') cpAddColorButtonClass: string = 'cp-add-color-button-class';\r\n    @Input('cpAddColorButtonText') cpAddColorButtonText: string = 'Add color';\r\n    @Input('cpRemoveColorButtonClass') cpRemoveColorButtonClass: string = 'cp-remove-color-button-class';\r\n    @Input('cpFallbackColor') cpFallbackColor: string = '#fff';\r\n    @Input('cpHeight') cpHeight: string = 'auto';\r\n    @Input('cpWidth') cpWidth: string = '272px';\r\n    @Input('cpIgnoredElements') cpIgnoredElements: any = [];\r\n    @Input('cpDialogDisplay') cpDialogDisplay: string = 'popup';\r\n    @Input('cpSaveClickOutside') cpSaveClickOutside: boolean = true;\r\n    @Input('cpAlphaChannel') cpAlphaChannel: string = 'enabled';\r\n    @Input('cpUseRootViewContainer') cpUseRootViewContainer: boolean = false;\r\n    @Input('headerName') headerName:string = 'Edit Color';\r\n    @Input('saveBtnTxt') saveBtnTxt: string = 'Save';\r\n    @Input('cancelBtnTxt') cancelBtnTxt: string = 'Cancel';\r\n\r\n    @Output('cpInputChange') cpInputChange = new EventEmitter<any>(true);\r\n\r\n    @Output('cpToggleChange') cpToggleChange = new EventEmitter<boolean>(true);\r\n\r\n    @Output('cpSliderChange') cpSliderChange = new EventEmitter<any>(true);\r\n    @Output('cpSliderDragEnd') cpSliderDragEnd = new EventEmitter<string>(true);\r\n    @Output('cpSliderDragStart') cpSliderDragStart = new EventEmitter<string>(true);\r\n\r\n    @Output('colorPickerCancel') colorPickerCancel = new EventEmitter<string>(true);\r\n    @Output('colorPickerSelect') colorPickerSelect = new EventEmitter<string>(true);\r\n    @Output('colorPickerChange') colorPickerChange = new EventEmitter<string>(false);\r\n    @Output('cpPresetColorsChange') presetColorsChange = new EventEmitter<any>(true);\r\n\r\n    private dialog: any;\r\n    private created: boolean;\r\n    private ignoreChanges: boolean = false;\r\n    private cmpRef: ComponentRef<ColorPickerComponent>;\r\n\r\n    constructor(private injector: Injector, private cfr: ComponentFactoryResolver,\r\n      private appRef: ApplicationRef, private vcRef: ViewContainerRef, private elRef: ElementRef,\r\n      private service: ColorPickerService)\r\n    {\r\n        this.created = false;\r\n    }\r\n\r\n    ngOnChanges(changes: any): void {\r\n        if (changes.cpToggle) {\r\n            if (changes.cpToggle.currentValue) this.openDialog();\r\n            if (!changes.cpToggle.currentValue && this.dialog) this.dialog.closeColorPicker();\r\n        }\r\n        if (changes.colorPicker) {\r\n            if (this.dialog && !this.ignoreChanges) {\r\n                if (this.cpDialogDisplay === 'inline') {\r\n                    this.dialog.setInitialColor(changes.colorPicker.currentValue);\r\n                }\r\n                this.dialog.setColorFromString(changes.colorPicker.currentValue, false);\r\n\r\n            }\r\n            this.ignoreChanges = false;\r\n        }\r\n        if (changes.cpPresetLabel || changes.cpPresetColors) {\r\n            if (this.dialog) {\r\n                this.dialog.setPresetConfig(this.cpPresetLabel, this.cpPresetColors);\r\n            }\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.colorPicker = this.colorPicker || this.cpFallbackColor || 'rgba(0, 0, 0, 1)';\r\n        /*let hsva = this.service.stringToHsva(this.colorPicker);\r\n        if (hsva === null) hsva = this.service.stringToHsva(this.colorPicker, true);\r\n        if (hsva == null) {\r\n            hsva = this.service.stringToHsva(this.cpFallbackColor);\r\n        }\r\n        let color = this.service.outputFormat(hsva, this.cpOutputFormat, this.cpAlphaChannel);\r\n        if (color !== this.colorPicker) {\r\n            //setTimeout(() => {\r\n              this.colorPickerChange.emit(color);\r\n              this.cdr.detectChanges();\r\n            //}, 0);\r\n        }*/\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.cmpRef !== undefined) {\r\n            this.cmpRef.destroy();\r\n        }\r\n    }\r\n\r\n    openDialog() {\r\n        this.colorPicker = this.colorPicker || this.cpFallbackColor || 'rgba(0, 0, 0, 1)';\r\n\r\n        if (!this.created) {\r\n            this.created = true;\r\n            let vcRef = this.vcRef;\r\n            if (this.cpUseRootViewContainer && this.cpDialogDisplay !== 'inline') {\r\n              const classOfRootComponent = this.appRef.componentTypes[0];\r\n              const appInstance = this.injector.get(classOfRootComponent);\r\n              vcRef = appInstance.vcRef || appInstance.viewContainerRef || this.vcRef;\r\n              if (vcRef === this.vcRef) {\r\n                console.warn('You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!' +\r\n                  'Please expose it by adding \\'public vcRef: ViewContainerRef\\' to the constructor.');\r\n              }\r\n            }\r\n            const compFactory = this.cfr.resolveComponentFactory(ColorPickerComponent);\r\n            const injector = ReflectiveInjector.fromResolvedProviders([], vcRef.parentInjector);\r\n            this.cmpRef = vcRef.createComponent(compFactory, 0, injector, []);\r\n            this.cmpRef.instance.setDialog(this, this.elRef, this.colorPicker, this.cpPosition, this.cpPositionOffset,\r\n                this.cpPositionRelativeToArrow, this.cpOutputFormat, this.cpPresetLabel, this.cpPresetEmptyMessage,\r\n                this.cpPresetEmptyMessageClass, this.cpPresetColors, this.cpMaxPresetColorsLength,\r\n                this.cpCancelButton, this.cpCancelButtonClass, this.cpCancelButtonText,\r\n                this.cpOKButton, this.cpOKButtonClass, this.cpOKButtonText,\r\n                this.cpAddColorButton, this.cpAddColorButtonClass, this.cpAddColorButtonText,\r\n                this.cpRemoveColorButtonClass,\r\n                this.cpHeight, this.cpWidth, this.cpIgnoredElements,\r\n                this.cpDialogDisplay, this.cpSaveClickOutside, this.cpAlphaChannel, this.cpUseRootViewContainer,\r\n                this.headerName,this.saveBtnTxt,this.cancelBtnTxt);\r\n            this.dialog = this.cmpRef.instance;\r\n\r\n            if (this.vcRef !== vcRef) {\r\n                this.cmpRef.changeDetectorRef.detectChanges();\r\n            }\r\n        } else if (this.dialog) {\r\n            this.dialog.openDialog(this.colorPicker);\r\n        }\r\n    }\r\n\r\n    toggle(value: boolean) {\r\n        this.cpToggleChange.emit(value);\r\n    }\r\n\r\n    colorChanged(value: string, ignore: boolean = true) {\r\n        this.ignoreChanges = ignore;\r\n        this.colorPickerChange.emit(value);\r\n    }\r\n\r\n    colorCanceled() {\r\n      this.colorPickerCancel.emit();\r\n    }\r\n\r\n    colorSelected(value: string) {\r\n        this.colorPickerSelect.emit(value);\r\n    }\r\n\r\n    presetColorsChanged(value: Array<any>) {\r\n        this.presetColorsChange.emit(value);\r\n    } \r\n\r\n    inputFocus() {\r\n        if (this.cpIgnoredElements.filter((item: any) => item === this.elRef.nativeElement).length === 0) {\r\n            this.openDialog();\r\n        }\r\n    }\r\n\r\n    inputChange(value: string) {\r\n      if (this.dialog) {\r\n        this.dialog.setColorFromString(value, true);\r\n      } else {\r\n        this.colorPicker = value || this.cpFallbackColor || 'rgba(0, 0, 0, 1)';\r\n\r\n        this.colorPickerChange.emit(this.colorPicker);\r\n      }\r\n    }\r\n\r\n    inputChanged(event: any) {\r\n        this.cpInputChange.emit(event);\r\n    }\r\n\r\n    sliderChanged(event: any) {\r\n        this.cpSliderChange.emit(event);\r\n    }\r\n\r\n    sliderDragEnd(event: any) {\r\n        this.cpSliderDragEnd.emit(event);\r\n    }\r\n\r\n    sliderDragStart(event: any) {\r\n        this.cpSliderDragStart.emit(event);\r\n    }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { TextDirective, SliderDirective } from './helpers';\r\n\r\nimport { ColorPickerService } from './color-picker.service';\r\nimport { ColorPickerComponent } from './color-picker.component';\r\nimport { ColorPickerDirective } from './color-picker.directive';\r\n\r\nimport './ng-dev-mode';\r\n\r\n@NgModule({\r\n  imports: [ CommonModule ],\r\n  exports: [ ColorPickerDirective ],\r\n  providers: [ ColorPickerService ],\r\n  declarations: [ ColorPickerComponent, ColorPickerDirective, TextDirective, SliderDirective ],\r\n  entryComponents: [ ColorPickerComponent ]\r\n})\r\nexport class ColorPickerModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}